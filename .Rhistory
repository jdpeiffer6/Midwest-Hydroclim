leaps = c("2000|2004|2008|2012|2016")
if (grepl("-2-29", x1)) {
print(x)
x = 366
} else if (grepl(leaps, x1) && x > 60) {
x = x - 1
}
dailyavg[x, 1:4] = as.numeric(wdata$weath[i, 4:7]) + dailyavg[x, 1:4]     #puts in the respective data
dailyavg[x, 5] = dailyavg[x, 5] + 1    #adds a number for the total days averaged over
}
for (i in 1:366) {
dailyavg[i, 1:4] = dailyavg[i, 1:4] / dailyavg[i, 5]
}
return(dailyavg)
}
avg=getAverages(wdata)
avg[366,]
plot(avg[,1])
plot(avg[,2])
plot(avg[,3])
plot(avg[,4])
getAverages = function(wdata) {
dailyavg = matrix(nrow = 366,
ncol = 5,
data = 0)   #makes a matrix with a column for every day +1 more for the number of days it was aquired over
for (i in 1:dim(wdata$weath)[1]) {
x1 = paste(wdata$weath$year[i],
wdata$weath$month[i],
wdata$weath$day[i],
sep = '-') #converts date to a type readable by strftime
x = as.numeric(strftime(x1, '%j'))   #converts that to a number
leaps = c("2000|2004|2008|2012|2016")
if (grepl("-2-29", x1)) {
print(x)
x = 366
} else if (grepl(leaps, x1) && x > 60) {
x = x - 1
}
dailyavg[x, 1:4] = as.numeric(wdata$weath[i, 4:7]) + dailyavg[x, 1:4]     #puts in the respective data
dailyavg[x, 5] = dailyavg[x, 5] + 1    #adds a number for the total days averaged over
}
for (i in 1:366) {
print(dailyavg[i,])
dailyavg[i, 1:4] = dailyavg[i, 1:4] / dailyavg[i, 5]
}
return(dailyavg)
}
avg=getAverages(wdata)
74.4/5
getAverages = function(wdata) {
dailyavg = matrix(nrow = 366,
ncol = 5,
data = 0)   #makes a matrix with a column for every day +1 more for the number of days it was aquired over
for (i in 1:dim(wdata$weath)[1]) {
x1 = paste(wdata$weath$year[i],
wdata$weath$month[i],
wdata$weath$day[i],
sep = '-') #converts date to a type readable by strftime
x = as.numeric(strftime(x1, '%j'))   #converts that to a number
leaps = c("2000|2004|2008|2012|2016")
if (grepl("-2-29", x1)) {
print(x)
x = 366
print(wdata$weath[i, 4:7])
} else if (grepl(leaps, x1) && x > 60) {
x = x - 1
}
dailyavg[x, 1:4] = as.numeric(wdata$weath[i, 4:7]) + dailyavg[x, 1:4]     #puts in the respective data
dailyavg[x, 5] = dailyavg[x, 5] + 1    #adds a number for the total days averaged over
}
for (i in 1:366) {
dailyavg[i, 1:4] = dailyavg[i, 1:4] / dailyavg[i, 5]
}
return(dailyavg)
}
avg=getAverages(wdata)
getAverages
library(xlsx)
?write.xlsx''
?write.xlsx
names(wdata$weath)
head(wdata$weath)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
View(avg)
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
avg=getAverages(wdata)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
xlsx.write(avg,file=xcelpath,col.names=T,sheeName=i)
save(file=i,wdata,avg)
}
getAverages = function(wdata) {
dailyavg = matrix(nrow = 366,
ncol = 5,
data = 0)   #makes a matrix with a column for every day +1 more for the number of days it was aquired over
for (i in 1:dim(wdata$weath)[1]) {
x1 = paste(wdata$weath$year[i],
wdata$weath$month[i],
wdata$weath$day[i],
sep = '-') #converts date to a type readable by strftime
x = as.numeric(strftime(x1, '%j'))   #converts that to a number
leaps = c("2000|2004|2008|2012|2016")
if (grepl("-2-29", x1)) {
x = 366
} else if (grepl(leaps, x1) && x > 60) {
x = x - 1
}
dailyavg[x, 1:4] = as.numeric(wdata$weath[i, 4:7]) + dailyavg[x, 1:4]     #puts in the respective data
dailyavg[x, 5] = dailyavg[x, 5] + 1    #adds a number for the total days averaged over
}
for (i in 1:366) {
dailyavg[i, 1:4] = dailyavg[i, 1:4] / dailyavg[i, 5]
}
return(dailyavg)
}
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
avg=getAverages(wdata)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,sheeName=i)
save(file=i,wdata,avg)
}
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
avg=getAverages(wdata)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,sheetName=i)
save(file=i,wdata,avg)
}
i
wdata
dim(wdata$percip)
dir()
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
print(names(wdata))
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
for(i in 6){
path=createPath(stations,i)
a=getParkData(path)
cat(paste(round(100*i/39),'% '))
}
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
print(names(wdata))
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
path=createPath(stations,i)
i
i=6
path=createPath(stations,i)
path
i
stations
stations$Link
load("~/GitHub/StateParks/Data/stations.Rdata")
stations$Link
for(i in 31){          #this is a useful test to see if things work
browseURL(createPath(stations,i))
}
#useful to check what files contain NA
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
stations$base
createPath(stations,33)
stations$base[6]='http://agebb.missouri.edu/weather/history/report.asp?station_prefix=but'
createPath(stations,33)
createPath(stations,6)
getwd()
save(stations,file='stations.Rdata')
##this code I used to run the getParkData() function on all of the links and make sure it was returning the right data!
for(i in 6){
path=createPath(stations,i)
a=getParkData(path)
cat(paste(round(100*i/39),'% '))
}
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
avg=getAverages(wdata)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,append=T,sheetName=i)
save(file=i,wdata,avg)
}
i
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
avg=getAverages(wdata)
colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,append=T,sheetName=i)
save(file=i,wdata,avg)
}
?addDataFrame
xcelpath
wdata$meta
write.xlsx(wdata$meta,file=xcelpath,append=T,sheetName=i,startColumn=7)
?read.xlsx
?write.xlsx
?addDataFrame
write.xlsx2(wdata$meta,file=xcelpath,append=T,sheetName=i,startColumn=7)
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
print(wdata$meta$description)
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
print(wdata$meta$station)
print(wdata$meta$description)
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
a[i,1]=wdata$meta$station
#useful to check what files contain NA
a=matrix(nrow=39,ncol=2)
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
a[i,1]=wdata$meta$station
a[i,2]=wdata$meta$description
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
wdata$meta$station
wdata$meta$description
a[i,1]=wdata$meta$station
a
#useful to check what files contain NA
a=matrix(nrow=39,ncol=2,data=' ')
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
a[i,1]=wdata$meta$station
a[i,2]=wdata$meta$description
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
wdata$meta$station
a[1,1]="potato"
#useful to check what files contain NA
a=matrix(nrow=39,ncol=2,data=' ')
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
a[i,1]=toString(wdata$meta$station)
a[i,2]=toString(wdata$meta$description)
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
i
a=matrix(nrow=39,ncol=2)
j=0
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
j=j+1
name=load(i)
a[j,1]=wdata$meta$station
a[j,2]=wdata$meta$description
# print(sum(is.na(wdata$weath))/7)
#for(i in 1:dim(wdata$weath)[1]){
#if(sum(is.na(wdata$weath[i,]))>0){print(wdata$weath[i,])}}
}
a
write.xlsx(a,file=xcelpath,col.names = F,row.names = F,sheetName='metadata')
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
#avg=getAverages(wdata)
#colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,append=T,sheetName=i)
save(file=i,wdata,avg)
}
i
write.xlsx(a,file=xcelpath,col.names = F,row.names = F,sheetName='metadata',append=T)
write.xlsx(a,file=xcelpath,col.names = F,row.names = F,sheetName='metadata',append=T)
library(xlsx)
write.xlsx(a,file=xcelpath,col.names = F,row.names = F,sheetName='metadata',append=T)
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')
xcelpath='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\avgData.xlsx'
for(i in dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data\\Location Data')){
name=load(i)
#avg=getAverages(wdata)
#colnames(avg)=c("Daily Percipation (mm)","Max Temp (C)","Min Temp (C)","Avg Temp (C)","Days in average")
write.xlsx(avg,file=xcelpath,col.names=T,append=T,sheetName=i)
save(file=i,wdata,avg)
}
plot(rnorm(10))
cor.test(1:10,1:10)
plot(1:10,1:10)
plot(wdata$weath)
plot(wdata$weath[,2])
wdata$weath[,2]
plot(avg[,2])
wdata$meta
names(wdata$weath)
?names
plot(avg[,1])
plot(avg[,1])
3
plot(avg[,3])
plot(avg[,4])
plot(avg[,3])
plot(avg[,2])
plot(avg[,1])
plot(avg[,4])
plot(avg[,5])
library(xlax)
library(xlsx)
'C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data'
setwd('C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Data')
dir()
dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks')
dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents')
dir('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx')
xlsx.read('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx')
a=read.xlsx('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx')
a=read.xlsx('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx',sheetName=1)
a
View(a)
a=read.xlsx('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx',sheetName=1,colNames=0)
?read.xlsx
a=read.xlsx('C:\\Users\\JD\\Documents\\GitHub\\StateParks//Documents//avgData.xlsx',sheetName=1,header=0)
a$X3
loc=a$X3
?substr
?strsplit
strsplit(loc,' ')
strsplit(toString(loc),' ')
toString(loc)
toString(loc[1])
strsplit(toString(loc[1]),' ')
i=1
length(strsplit(toString(loc[1]),' '))
length(strsplit(toString(loc[1]),' ')[[1]])
for(i in 1:39){
loc[i]=toString(loc[i])
sp=strsplit(loc[i],' ')
if(length(strsplit(sp)[[1]])==4){
print("found")
}
}
for(i in 1:39){
loc[i]=toString(loc[i])
sp=strsplit(loc[i],' ')
if(length(strsplit(sp,' ')[[1]])==4){
print("found")
}
}
for(i in 1:39){
loc[i]=toString(loc[i])
sp=strsplit(loc[i],' ')
if(length(sp)[[1]])==4){
print("found")
}
}
for(i in 1:39){
loc[i]=toString(loc[i])
sp=strsplit(loc[i],' ')[[1]]
if(length(sp))==4){
print("found")
}
}
for(i in 1:39){
loc[i]=toString(loc[i])
sp=strsplit(loc[i],' ')[[1]]
if(length(sp)==4){
print("found")
}
}
i
sp
sp=strsplit(loc[i],' ')[[1]]
loc[i]
loc[i]=toString(loc[i])
loc[i]
loc[i]
toString(loc[i])
toString(loc[i])
loc[i]=toString(loc[i])
loc[i]
toString(loc[i])
loc2[i]=toString(loc[i])
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc[i],' ')[[1]]
if(length(sp)==4){
print("found")
}
}
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc2[i],' ')[[1]]
if(length(sp)==4){
print("found")
}
}
sp
paste(substr(sp,1,9),substr(sp),1,10),sep=', ')
paste(substr(sp,1,9),substr(sp),1,10)),sep=', ')
paste(substr(sp,1,9),substr(sp,1,10),sep=', ')
paste(substr(sp[1],1,9),substr(sp[3],1,10),sep=', ')
paste(substr(sp[2],1,9),substr(sp[4],1,10),sep=', ')
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc2[i],' ')[[1]]
if(length(sp)==4){
print(loc2)
print(paste(substr(sp[2],1,9),substr(sp[4],1,10),sep=', '))
}
}
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc2[i],' ')[[1]]
if(length(sp)==4){
print(loc2[i])
print(paste(substr(sp[2],1,9),substr(sp[4],1,10),sep=', '))
}
}
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc2[i],' ')[[1]]
if(length(sp)==4){
print(loc2[i])
loc2=paste(substr(sp[2],1,9),substr(sp[4],1,10),sep=', ')
}
}
loc2
loc2=vector(length=39)
for(i in 1:39){
loc2[i]=toString(loc[i])
sp=strsplit(loc2[i],' ')[[1]]
if(length(sp)==4){
print(loc2[i])
loc2[i]=paste(substr(sp[2],1,9),substr(sp[4],1,10),sep=', ')
}
}
loc2
getwd()
?write.xlsx
write.xlsx(loc2,file='C:\\Users\\JD\\Documents\\GitHub\\StateParks\\Documents\\loc.xlsx')
?lm
install.packages("rnoaa")
library('plyr')
library('rnoaa')
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
out <- ncdc(datasetid='NORMAL_DLY', datatypeid='dly-tmax-normal', startdate = '2010-05-01', enddate = '2010-05-10')
ncdc_locs(locationcategoryid='CITY', sortfield='name', sortorder='desc')
cpc_prcp()
coops_search(station_name = 8723970, begin_date = 20140927,
end_date = 20140928, product = "air_pressure")
cpc_prcp(data="2017-01-15")
cpc_prcp(date="2017-01-15")
test=cpc_prcp(date="2017-01-15")
View(test)
test$lon
range(1:10)
range(test$lon)
range(test$lat)
range(test$precip)
hist(test$percip)
hist(as.Double(test$percip))
hist(as.double(test$percip))
hist(as.double(test$precip))
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
library(rnoaa)
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
help(rprofile)
help(Rprofile)
options(noaakey = "JLTtJLSXuOQZhAgLLpcLzjwTUfehkGee")
library(rnoaa)
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
options(noaakey = "JLTtJLSXuOQZhAgLLpcLzjwTUfehkGee")
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
R.home()
R.home(component = "home")
file.edit(".Rprofile")
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
library("rnoaa")
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
file.edit(".Rprofile")
ncdc_stations(datasetid='GHCND', locationid='FIPS:12017', stationid='GHCND:USC00084289')
View(wdata$weath)
?replications
